(function(e){function n(n){for(var r,o,s=n[0],c=n[1],p=n[2],m=0,f=[];m<s.length;m++)o=s[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(n);while(f.length)f.shift()();return a.push.apply(a,p||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,o=1;o<t.length;o++){var s=t[o];0!==i[s]&&(r=!1)}r&&(a.splice(n--,1),e=c(c.s=t[0]))}return e}var r={},o={app:0},i={app:0},a=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"37fc2700","chunk-03c229be":"81640073","chunk-0a483282":"db392377","chunk-0e3452c3":"3093e4b1","chunk-10bbff56":"3eac745e","chunk-18aa50ba":"e4e672ab","chunk-2d0bda08":"d2a7951c","chunk-2d0ce7eb":"331f1a7a","chunk-2d0cebfb":"06741490","chunk-2d21ed27":"acc4e0a9","chunk-2dc35639":"023ea19a","chunk-360c663a":"0461d7c3","chunk-54cb55e5":"ef8fdd63","chunk-6eccab85":"76a1a98c","chunk-70e8bc69":"c00b379c","chunk-9c8ee19a":"d9b19216","chunk-dac2a49c":"4fe54262","chunk-df2448ca":"be541c2c","chunk-e25f6612":"5d350453","chunk-10c1dfcb":"86cf6fb7","chunk-17a2a7ca":"56950b1d","chunk-1c9fe3c0":"8c3cabd9","chunk-2d0ab85d":"6794257f","chunk-2d0ba6b9":"04dc870b","chunk-2d0d7215":"3525a23f","chunk-2d0dde0c":"e8f227b3","chunk-2d0de6e4":"981b0e10","chunk-2d207805":"4e3dccf9","chunk-2d213ec7":"f803068e","chunk-2d2183ee":"1c28b753","chunk-2d21eebb":"bd2ca9be","chunk-2d222176":"c2bc3ddb","chunk-2da9c6f6":"c974788a","chunk-3d6dbb4c":"f71096ac","chunk-4140649c":"6fe47adf","chunk-4419e8a6":"1c375d3e","chunk-465a8008":"da213da0","chunk-4c1d6c2a":"0fbd97a2","chunk-52664264":"6d9f1ce2","chunk-6461589e":"3870d521","chunk-7399fa48":"85c9bdfe","chunk-750c4a2b":"48abbc74","chunk-995d13ee":"3a696f82","chunk-acf006bc":"b11fcadf","chunk-f4618fe0":"e08f7d6d","chunk-fbd22abe":"62b3117b","chunk-2d0b2b24":"543249c4","chunk-2d0c7944":"fed50edd","chunk-2d0e6864":"24f85990","chunk-6e2503b6":"f89c3ee3"}[e]+".js"}function c(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(e){var n=[],t={about:1,"chunk-03c229be":1,"chunk-10bbff56":1,"chunk-2dc35639":1,"chunk-54cb55e5":1,"chunk-6eccab85":1,"chunk-70e8bc69":1,"chunk-9c8ee19a":1,"chunk-dac2a49c":1,"chunk-df2448ca":1,"chunk-e25f6612":1,"chunk-1c9fe3c0":1};o[e]?n.push(o[e]):0!==o[e]&&t[e]&&n.push(o[e]=new Promise((function(n,t){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"e4784dea","chunk-03c229be":"5a13828d","chunk-0a483282":"31d6cfe0","chunk-0e3452c3":"31d6cfe0","chunk-10bbff56":"b34af10d","chunk-18aa50ba":"31d6cfe0","chunk-2d0bda08":"31d6cfe0","chunk-2d0ce7eb":"31d6cfe0","chunk-2d0cebfb":"31d6cfe0","chunk-2d21ed27":"31d6cfe0","chunk-2dc35639":"227ac777","chunk-360c663a":"31d6cfe0","chunk-54cb55e5":"f246d409","chunk-6eccab85":"21705f02","chunk-70e8bc69":"369248b8","chunk-9c8ee19a":"84a2c1b8","chunk-dac2a49c":"9079bd96","chunk-df2448ca":"1bbfc5b1","chunk-e25f6612":"14ae58a5","chunk-10c1dfcb":"31d6cfe0","chunk-17a2a7ca":"31d6cfe0","chunk-1c9fe3c0":"c5af2066","chunk-2d0ab85d":"31d6cfe0","chunk-2d0ba6b9":"31d6cfe0","chunk-2d0d7215":"31d6cfe0","chunk-2d0dde0c":"31d6cfe0","chunk-2d0de6e4":"31d6cfe0","chunk-2d207805":"31d6cfe0","chunk-2d213ec7":"31d6cfe0","chunk-2d2183ee":"31d6cfe0","chunk-2d21eebb":"31d6cfe0","chunk-2d222176":"31d6cfe0","chunk-2da9c6f6":"31d6cfe0","chunk-3d6dbb4c":"31d6cfe0","chunk-4140649c":"31d6cfe0","chunk-4419e8a6":"31d6cfe0","chunk-465a8008":"31d6cfe0","chunk-4c1d6c2a":"31d6cfe0","chunk-52664264":"31d6cfe0","chunk-6461589e":"31d6cfe0","chunk-7399fa48":"31d6cfe0","chunk-750c4a2b":"31d6cfe0","chunk-995d13ee":"31d6cfe0","chunk-acf006bc":"31d6cfe0","chunk-f4618fe0":"31d6cfe0","chunk-fbd22abe":"31d6cfe0","chunk-2d0b2b24":"31d6cfe0","chunk-2d0c7944":"31d6cfe0","chunk-2d0e6864":"31d6cfe0","chunk-6e2503b6":"31d6cfe0"}[e]+".css",i=c.p+r,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var p=a[s],m=p.getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(m===r||m===i))return n()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){p=f[s],m=p.getAttribute("data-href");if(m===r||m===i)return n()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=n,d.onerror=function(n){var r=n&&n.target&&n.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete o[e],d.parentNode.removeChild(d),t(a)},d.href=i;var l=document.getElementsByTagName("head")[0];l.appendChild(d)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(n,t){r=i[e]=[n,t]}));n.push(r[2]=a);var p,m=document.createElement("script");m.charset="utf-8",m.timeout=120,c.nc&&m.setAttribute("nonce",c.nc),m.src=s(e);var f=new Error;p=function(n){m.onerror=m.onload=null,clearTimeout(d);var t=i[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",f.name="ChunkLoadError",f.type=r,f.request=o,t[1](f)}i[e]=void 0}};var d=setTimeout((function(){p({type:"timeout",target:m})}),12e4);m.onerror=m.onload=p,document.head.appendChild(m)}return Promise.all(n)},c.m=e,c.c=r,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)c.d(t,r,function(n){return e[n]}.bind(null,r));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="/vnf-designer/",c.oe=function(e){throw console.error(e),e};var p=window["webpackJsonp"]=window["webpackJsonp"]||[],m=p.push.bind(p);p.push=n,p=p.slice();for(var f=0;f<p.length;f++)n(p[f]);var d=m;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";var r=t("85ec"),o=t.n(r);o.a},"0c89":function(e,n,t){},4968:function(e,n,t){"use strict";var r=t("9e71"),o=t.n(r);o.a},"56d7":function(e,n,t){"use strict";t.r(n);var r=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],a=(t("034f"),t("2877")),s={},c=Object(a["a"])(s,o,i,!1,null,null,null),p=c.exports,m=t("8c4f"),f=t("bb51");r["a"].use(m["a"]);const d=[{path:"/",name:"Home",component:f["default"]},{path:"/docs",name:"Docs",component:function(){return t.e("about").then(t.bind(null,"eba1"))}}],l=new m["a"]({base:"/vnf-designer/",routes:d});var u=l,v=t("2f62"),h=t("5935");r["a"].use(v["a"]);var _=new v["a"].Store({state:{selectedModeview:"openstack",modeviews:{openstack:"Openstack",etsi_mano:"ETSI/MANO"}},mutations:{updateField:h["c"]},actions:{},modules:{},getters:{getField:h["a"]}});r["a"].config.productionTip=!1,new r["a"]({router:u,store:_,render:function(e){return e(p)}}).$mount("#app")},"6f51":function(e,n,t){"use strict";var r=t("bc77"),o=t.n(r);o.a},"81ad":function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("AppTopbar",{attrs:{model:e.model,view:e.view}}),t("AppSidebarContent",{attrs:{model:e.model,view:e.view}}),t("AppContent",{attrs:{model:e.model,current:e.current,target:e.target,view:e.view,templates:e.templates}}),""!==e.view.modal?t("modal",{attrs:{view:e.view}}):e._e()],1)},o=[],i=t("8c91"),a=t("c082"),s=t("b517"),c=t("c505"),p=t("a79f"),m=t("9acf"),f='---\r\nschema:     {{schema}}\r\nvnf:        {{vnf}}\r\nversion:    {{version}}\r\ntenant:\r\n  name:          "{{tenant.name}}"\r\n  prefix:        "{{tenant.prefix}}"\r\n  auth:\r\n    username:    "{{tenant.auth.username}}"\r\n    password:    "{{tenant.auth.password}}"\r\n    proxy:       "{{tenant.auth.proxy}}"\r\n    url:         "{{tenant.auth.url}}"\r\n{% if tenant.auth.cert == "" %}\r\n    cert:        ""\r\n{% else %}\r\n    cert:        |\r\n      {{tenant.auth.cert | indent(6, false) }}\r\n{% endif %}\r\n    region:      "{{tenant.auth.region}}"\r\n    vol_api:     "{{tenant.auth.vol_api}}"\r\n    plugin:      "{{tenant.auth.plugin}}"\r\n{% if tenant.service %}{% if tenant.service.network != "" %}\r\n  service:\r\n    network:     "{{tenant.service.network}}"\r\n    cidr:        "{{tenant.service.cidr}}"\r\n    gateway:     "{{tenant.service.gateway}}"\r\n    proxy:       "{{tenant.service.proxy}}"\r\n    port:        "{{tenant.service.port}}"\r\n{% endif %}{% endif%}\r\n  jumphost:      "{{tenant.jumphost}}"\r\n  proxy:\r\n    http:        "{{tenant.proxy.http}}"\r\n    https:       "{{tenant.proxy.https}}"\r\nflavors:\r\n{% for flavor in flavors %}\r\n  - uuid:    "{{flavor.uuid}}"\r\n    name:    "{{flavor.name}}"\r\n    vcpu:    {{flavor.vcpu}}\r\n    ram:     {{flavor.ram}}\r\n    disk:    {{flavor.disk}}\r\n    public:  "{{flavor.public}}"\r\n{% if flavor.special|length == 0 %}\r\n    special: []\r\n{% endif -%}\r\n{% if flavor.special|length >  0 %}\r\n    special:\r\n{% endif -%}\r\n{% for special in flavor.special %}\r\n      - { key: "{{special.key}}", value: "{{special.value}}" }\r\n{% endfor %}\r\n{% endfor %}\r\nimages:\r\n{% for image in images %}\r\n  - { uuid: "{{image.uuid}}", name: "{{image.name}}", version: "{{image.version}}", format: "{{image.format}}", container: "{{image.container}}", disk: "{{image.disk}}", size: "{{image.size}}", checksum: "{{image.checksum}}", url: "{{image.url}}", special: "{{image.special}}" }\r\n{% endfor %}\r\nnetworks:\r\n{% for network in networks%}\r\n  - uuid:      "{{network.uuid}}"\r\n    name:      "{{network.name}}"\r\n    external:  "{{network.external}}"\r\n    ipv4:      "{{network.ipv4}}"\r\n    ipv4gw:    "{{network.ipv4gw}}"\r\n    ipv4start: "{{network.ipv4start}}"\r\n    ipv4end:   "{{network.ipv4end}}"\r\n    ipv6:      "{{network.ipv6}}"\r\n    ipv6gw:    "{{network.ipv6gw}}"\r\n    ipv6start: "{{network.ipv6start}}"\r\n    ipv6end:   "{{network.ipv6end}}"\r\n    route:     "{{network.route}}"\r\n    export:    "{{network.export}}"\r\n    import:    "{{network.import}}"\r\n    special:   "{{network.special}}"\r\n{% endfor %}\r\ncomponents:\r\n{% for component in components %}\r\n  - uuid:         "{{component.uuid}}"\r\n    name:         "{{component.name}}"\r\n    user:         "{{component.user}}"\r\n    placement:    "{{component.placement}}"\r\n    flavor:       "{{component.flavor}}"\r\n    image:        "{{component.image}}"\r\n    min:          {{component.min}}\r\n    size:         {{component.size}}\r\n    max:          {{component.max}}\r\n{% if component.volumes|length == 0 %}\r\n    volumes:      []\r\n{% endif -%}\r\n{% if component.volumes|length >  0 %}\r\n    volumes:\r\n{% endif -%}\r\n{% for volume in component.volumes %}\r\n      - { name: "{{volume.name}}", size: {{volume.size}}, type: "{{volume.type}}", attributes: "{{volume.attributes}}" }\r\n{% endfor %}\r\n{% if component.componentInterfaces|length == 0 %}\r\n    componentInterfaces:   []\r\n{% endif -%}\r\n{% if component.componentInterfaces|length >  0 %}\r\n    componentInterfaces:\r\n{% endif -%}\r\n{% for componentInterface in component.componentInterfaces %}\r\n      - { network: "{{componentInterface.network}}", attributes: "{{componentInterface.attributes}}" }\r\n{% endfor %}\r\n{% if component.services|length == 0 %}\r\n    services:     []\r\n{% endif -%}\r\n{% if component.services|length >  0 %}\r\n    services:\r\n{% endif -%}\r\n{% for service in component.services %}\r\n      - { name: "{{service.name}}", network: "{{service.network}}", protocol: "{{service.protocol}}", range: "{{service.range}}" }\r\n{% endfor %}\r\n{% if component.dependencies|length == 0 %}\r\n    dependencies: []\r\n{% endif -%}\r\n{% if component.dependencies|length >  0 %}\r\n    dependencies:\r\n{% endif -%}\r\n{% for dependency in component.dependencies %}\r\n      - { component: "{{dependency.component}}", service: "{{dependency.service}}", network: "{{dependency.network}}" }\r\n{% endfor %}\r\n{% if component.userdata == "" %}\r\n    userdata:     ""\r\n{% endif -%}\r\n{% if component.userdata != "" %}\r\n    userdata: |\r\n      {{ component.userdata | indent(6) | safe }}\r\n{% endif -%}\r\n\r\n{% endfor %}\r\n',d="From                |Network |To                  |Service   |Protocol|Port (range)    |Network\r\n{% for component1 in components %}{% for dependency in component1.dependencies %}\r\n{% for component2 in components %}{% if component2.name == dependency.component %}\r\n{% for service in component2.services %}{% if service.name == dependency.service %}\r\n{{(component1.name    + '                    ') | truncate(20,false,'') }}|{{(dependency.network + '        ') | truncate(8,false,'') }}|{{(component2.name + '                    ') | truncate(20,false,'') }}|{{(service.name + '          ') | truncate(10,false,'') }}|{{(service.protocol + '        ') | truncate(8,false,'')  }}|{{(service.range      + '                ') | truncate(16,false,'') }}|{{(service.network    + '      ') | truncate(6,false,'')  }}\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n{% endfor %}{% endfor %}\r\n",l='---\r\n# file: environment.yml\r\n\r\n# ----- environment variables -----\r\nenv_vars:\r\n  OS_TENANT_NAME:             "{{tenant.name}}"\r\n  OS_PROJECT_NAME:            "{{tenant.name}}"\r\n  OS_USERNAME:                "{{tenant.auth.username}}"\r\n  OS_PASSWORD:                "{{tenant.auth.password}}"\r\n  OS_API_PROXY:               "{{tenant.auth.proxy}}"\r\n  OS_AUTH_URL:                "{{tenant.auth.url}}"\r\n  OS_CACERT:                  "{{tenant.auth.cert}}"\r\n  OS_REGION_NAME:             "{{tenant.auth.region}}"\r\n  OS_VOLUME_API_VERSION:      "{{tenant.auth.vol_api}}"\r\n  OS_AUTH_PLUGIN:             "{{tenant.auth.plugin}}"\r\n\r\n  SERVICE_NETWORK:            "{{tenant.service.network}}"\r\n  SERVICE_CIDR:               "{{tenant.service.cidr}}"\r\n  SERVICE_GATEWAY:            "{{tenant.service.gateway}}"\r\n  PROXY_ADDRESS:              "{{tenant.service.proxy}}"\r\n  PROXY_PORT:                 "{{tenant.service.port}}"\r\n  JUMPHOST:                   "{{tenant.jumphost}}"\r\n{% if tenant.proxy.http %}{% if tenant.proxy.http != \'\' %}\r\n  http_proxy:                 "{{tenant.proxy.http}}"\r\n{% endif %}{% endif %}\r\n{% if tenant.proxy.https %}{% if tenant.proxy.https != \'\' %}\r\n  https_proxy:                "{{tenant.proxy.https}}"\r\n{% endif %}{% endif %}\r\n',u='#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create networks\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: "{{ \'{{ansible_playbook_python}}\' }}"\r\n  vars_files:\r\n    - ../../input/environment.yml\r\n  environment: "{{ \'{{env_vars}}\' }}"\r\n  tasks:\r\n{% for network in networks %}{% if network.external != "true" %}\r\n  - name: Create {{network.name}} network\r\n    os_network:\r\n      state:          present\r\n      name:           {{tenant.prefix}}{{network.name}}\r\n      validate_certs: no\r\n\r\n  - name: Create {{network.name}} subnet\r\n    os_subnet:\r\n      state:                 present\r\n      network_name:          {{tenant.prefix}}{{network.name}}\r\n      name:                  {{tenant.prefix}}{{network.name}}_subnet\r\n      cidr:                  {{network.ipv4}}\r\n      allocation_pool_start: {{network.ipv4start}}\r\n      allocation_pool_end:   {{network.ipv4end}}\r\n      validate_certs:        no\r\n\r\n{% if network.ipv6 != "" %}\r\n  - name: Create {{network.name}} subnet2\r\n    os_subnet:\r\n      state:                 present\r\n      network_name:          {{tenant.prefix}}{{network.name}}\r\n      name:                  {{tenant.prefix}}{{network.name}}_subnet2\r\n      cidr:                  {{network.ipv6}}\r\n      allocation_pool_start: {{network.ipv6start}}\r\n      allocation_pool_end:   {{network.ipv6end}}\r\n      validate_certs:        no\r\n\r\n{% endif %}\r\n{% endif %}{% endfor %}\r\n',v='#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Delete networks\r\n  hosts:        localhost\r\n  connection:   local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: "{{ \'{{ansible_playbook_python}}\' }}"\r\n  vars_files:\r\n    - ../../input/environment.yml\r\n  environment: "{{ \'{{env_vars}}\' }}"\r\n  tasks:\r\n    - name: Delete subnets\r\n      os_subnet:\r\n        state:          absent\r\n        name:           "{{ \'{{item}}\' }}_subnet"\r\n        validate_certs: no\r\n      loop:\r\n{% for network in networks %}{% if network.external != "true" %}\r\n      - {{tenant.prefix}}{{network.name}}\r\n{% endif %}{% endfor %}\r\n\r\n    - name: Delete networks\r\n      os_network:\r\n        state:          absent\r\n        name:           "{{ \'{{item}}\' }}"\r\n        validate_certs: no\r\n      loop:\r\n{% for network in networks %}{% if network.external != "true" %}\r\n      - {{tenant.prefix}}{{network.name}}\r\n{% endif %}{% endfor %}\r\n',h="#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create network inventory of the tenant\r\n  hosts:        localhost\r\n  connection:   local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: \"{{ '{{ansible_playbook_python}}' }}\"\r\n  vars_files:\r\n    - ../../input/environment.yml\r\n  environment: \"{{ '{{env_vars}}' }}\"\r\n  tasks:\r\n    - name: Define networks\r\n      set_fact:\r\n        network_names:\r\n{% for network in networks %}\r\n          - {{tenant.prefix}}{{network.name}}\r\n{% endfor %}\r\n\r\n    - name: Collect network information\r\n      os_networks_facts:\r\n         validate_certs: no\r\n      register: networks\r\n      ignore_errors: yes\r\n\r\n    - name: Collect subnet information\r\n      os_subnets_facts:\r\n         validate_certs: no\r\n      register: subnets\r\n      ignore_errors: yes\r\n\r\n    - name: Create report 'networks.yml'\r\n      template:\r\n        src:  ../templates/networks.tmpl\r\n        dest: ../../output/networks.yml\r\n      delegate_to:  localhost\r\n      changed_when: false\r\n",_='{% for component in components %}{% if component.placement != \'OTHER\' %}{% if component.placement != \'ROUTER\' %}{% for index in range(component.max) %}{% if component.max == 1 %}{% set component_name = component.name %}{% else %}{% set component_name = component.name + "-" + (index+1) %}{% endif %}\r\n----- {{tenant.prefix}}{{component_name}} -----\r\n#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create server {{tenant.prefix}}{{component_name}}\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: "{{ \'{{ansible_playbook_python}}\' }}"\r\n  vars_files:\r\n    - ../../../input/environment.yml\r\n  environment: "{{ \'{{env_vars}}\' }}"\r\n  tasks:\r\n{% for componentInterface in component.componentInterfaces %}\r\n  # ----- {{componentInterface.network}} port for {{tenant.prefix}}{{component_name}} -----\r\n  - name: Create {{componentInterface.network}} port for {{tenant.prefix}}{{component_name}}\r\n    os_port:\r\n      state:          present\r\n      name:           "{{tenant.prefix}}{{component_name}}_{{tenant.prefix}}{{componentInterface.network}}"\r\n      network:        "{{tenant.prefix}}{{componentInterface.network}}"\r\n      validate_certs: no\r\n      security_groups:\r\n      - "{{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}"\r\n{% if componentInterface.attributes|allowed|length > 0 %}\r\n      allowed_address_pairs:\r\n{% for allowed in componentInterface.attributes|allowed %}\r\n      - ip_address: {{allowed}}\r\n{% endfor %}{% endif %}\r\n{% if componentInterface.attributes|fixed|length > 0 %}\r\n      fixed_ips:\r\n{% for fixed in componentInterface.attributes|fixed %}\r\n      - ip_address: {{fixed}}\r\n{% endfor %}{% endif %}\r\n\r\n{% endfor %}\r\n\r\n  # ----- {{component_name}} virtual machine -----\r\n  - name: Create virtual machine for {{component_name}} server\r\n    os_server:\r\n      state:          present\r\n      name:           {{tenant.prefix}}{{component_name}}\r\n      flavor:         "{{component.flavor}}"\r\n      image:          "{{component.image}}"\r\n      key_name:       fiveg_key\r\n      config_drive:   yes\r\n      auto_ip:        no\r\n      timeout:        600\r\n      validate_certs: no\r\n      nics:\r\n{% for componentInterface in component.componentInterfaces %}\r\n        - port-name: {{tenant.prefix}}{{component_name}}_{{tenant.prefix}}{{componentInterface.network}}\r\n{% endfor %}\r\n      meta:\r\n       hostname: {{tenant.prefix}}{{component_name}}\r\n{% if component.userdata != "" %}\r\n      userdata: |\r\n        {{ component.userdata | indent(8) | safe }}\r\n{% endif %}\r\n\r\n{% if component.name == "jumphost" %}{% if tenant.jumphost != "" %}\r\n  # ----- floating IP for jumphost -----\r\n  - name: Determine {{tenant.prefix}}jumphost_{{tenant.prefix}}oam port information\r\n    os_port_facts:\r\n      port:           "{{tenant.prefix}}jumphost_{{tenant.prefix}}oam"\r\n      validate_certs: no\r\n    register: jumphost_oam_facts\r\n\r\n  - name: Assign floating IP to jumphost\r\n    os_floating_ip:\r\n      state:               present\r\n      server:              {{tenant.prefix}}jumphost\r\n      floating_ip_address: "{{tenant.jumphost}}"\r\n      fixed_address:       "{{ \'{{\' }} jumphost_oam_facts.ansible_facts.openstack_ports[0].fixed_ips[0].ip_address {{ \'}}\' }}"\r\n      validate_certs:      no\r\n\r\n{% endif %}{% endif %}\r\n\r\n{% for volume in component.volumes %}\r\n  # ----- {{volume.name}} volume for {{tenant.prefix}}{{component_name}} -----\r\n  - name: Create {{volume.name}} volume for {{tenant.prefix}}{{component_name}}\r\n    os_volume:\r\n      state:          present\r\n      name:           "{{tenant.prefix}}{{component_name}}_{{volume.name}}"\r\n      size:           {{volume.size}}\r\n      display_name:   "{{volume.name}} volume for {{tenant.prefix}}{{component_name}}"\r\n      validate_certs: no\r\n\r\n  - name: Attach volume {{volume.name}} to {{tenant.prefix}}{{component_name}}\r\n    os_server_volume:\r\n      state:          present\r\n      server:         "{{tenant.prefix}}{{component_name}}"\r\n      volume:         "{{tenant.prefix}}{{component_name}}_{{volume.name}}"\r\n      validate_certs: no\r\n\r\n{% endfor %}\r\n\r\n{% endfor %}{% endif %}{% endif %}{% endfor %}\r\n',k='{% for component in components %}{% if component.placement != \'OTHER\' %}{% if component.placement != \'ROUTER\' %}{% for index in range(component.max) %}{% if component.max == 1 %}{% set component_name = component.name %}{% else %}{% set component_name = component.name + "-" + (index+1) %}{% endif %}\r\n----- {{tenant.prefix}}{{component_name}} -----\r\n#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Delete server {{component_name}}\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: "{{ \'{{ansible_playbook_python}}\' }}"\r\n  vars_files:\r\n    - ../../../input/environment.yml\r\n  environment: "{{ \'{{env_vars}}\' }}"\r\n  tasks:\r\n{% for componentInterface in component.componentInterfaces %}\r\n  # ----- {{tenant.prefix}}{{componentInterface.network}} port for {{tenant.prefix}}{{component_name}} -----\r\n  - name: Delete {{tenant.prefix}}{{componentInterface.network}} port for {{tenant.prefix}}{{component_name}}\r\n    os_port:\r\n      state:          absent\r\n      name:           "{{tenant.prefix}}{{component_name}}_{{tenant.prefix}}{{componentInterface.network}}"\r\n      network:        "{{tenant.prefix}}{{componentInterface.network}}"\r\n      validate_certs: no\r\n\r\n{% endfor %}\r\n\r\n  # ----- {{tenant.prefix}}{{component_name}} virtual machine -----\r\n  - name: Delete virtual machine for {{tenant.prefix}}{{component_name}} server\r\n    os_server:\r\n      state:          absent\r\n      name:           {{tenant.prefix}}{{component_name}}\r\n      validate_certs: no\r\n\r\n{% for volume in component.volumes %}\r\n  # ----- {{volume.name}} volume for {{tenant.prefix}}{{component_name}} -----\r\n  - name: Delete {{volume.name}} volume for {{tenant.prefix}}{{component_name}}\r\n    os_volume:\r\n      state:          absent\r\n      name:           "{{tenant.prefix}}{{component_name}}_{{volume.name}}"\r\n      validate_certs: no\r\n\r\n{% endfor %}\r\n\r\n{% endfor %}{% endif %}{% endif %}{% endfor %}\r\n',g="#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create server inventory of the tenant\r\n  hosts:        localhost\r\n  connection:   local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: \"{{ '{{ansible_playbook_python}}' }}\"\r\n  vars_files:\r\n    - ../../input/environment.yml\r\n  environment: \"{{ '{{env_vars}}' }}\"\r\n  tasks:\r\n    - name: Define prefix\r\n      set_fact:\r\n        prefix: \"{{tenant.prefix}}\"\r\n\r\n    - name: Define jumphost\r\n      set_fact:\r\n        jumphost: {{tenant.jumphost}}\r\n\r\n    - name: Define servers\r\n      set_fact:\r\n        server_names:\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n{% if component.max == 1 %}\r\n          - {{tenant.prefix}}{{component.name}}\r\n{% else %}\r\n{% for server_index in range(1,1+component.max,1) %}\r\n          - {{tenant.prefix}}{{component.name}}-{{server_index}}\r\n{% endfor %}\r\n{% endif %}\r\n{% endif %}{% endif %}{% endfor %}\r\n\r\n    - name: Define ssh servers\r\n      set_fact:\r\n        ssh_server_names:\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}{% if component.user != '' %}\r\n{% if component.max == 1 %}\r\n          - {{tenant.prefix}}{{component.name}}\r\n{% else %}\r\n{% for server_index in range(1,1+component.max,1) %}\r\n          - {{tenant.prefix}}{{component.name}}-{{server_index}}\r\n{% endfor %}\r\n{% endif %}\r\n{% endif %}{% endif %}{% endif %}{% endfor %}\r\n\r\n\r\n    - name: Define ports\r\n      set_fact:\r\n        port_names:\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n{% for componentInterface in component.componentInterfaces %}\r\n{% if component.max == 1 %}\r\n          - {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\r\n{% else %}\r\n{% for server_index in range(1,component.max,1) %}\r\n          - {{tenant.prefix}}{{component.name}}-{{server_index}}_{{tenant.prefix}}{{componentInterface.network}}\r\n{% endfor %}\r\n{% endif %}\r\n{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\n\r\n    - name: Collect server information\r\n      os_server_facts:\r\n         validate_certs: no\r\n      register: servers\r\n      ignore_errors: yes\r\n\r\n    - name: Collect port information\r\n      os_port_facts:\r\n         validate_certs: no\r\n      register: ports\r\n      ignore_errors: yes\r\n\r\n    - name: Create report 'servers.yml'\r\n      template:\r\n        src:  ../templates/servers.tmpl\r\n        dest: ../../output/servers.yml\r\n      delegate_to:  localhost\r\n      changed_when: false\r\n\r\n    - name: Create ansible ssh config\r\n      template:\r\n        src:  ../templates/config\r\n        dest: ../../output/config\r\n      delegate_to:  localhost\r\n      changed_when: false\r\n\r\n    - name: Create ansible inventory\r\n      template:\r\n        src:  ../templates/inventory\r\n        dest: ../../output/inventory\r\n      delegate_to:  localhost\r\n      changed_when: false\r\n",w="{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n----- {{tenant.prefix}}{{component.name}} -----\r\n#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create security groups for ports of server {{component.name}}\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: \"{{ '{{ansible_playbook_python}}' }}\"\r\n  vars_files:\r\n    - ../../../input/environment.yml\r\n  environment: \"{{ '{{env_vars}}' }}\"\r\n  tasks:\r\n\r\n{% for componentInterface in component.componentInterfaces %}\r\n  # ----- security group for {{tenant.prefix}}{{component.name}} componentInterface {{tenant.prefix}}{{componentInterface.network}} -----\r\n  - name: Create {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}} security group\r\n    os_security_group:\r\n      state:          present\r\n      name:           {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\r\n      description:    Security group for the {{tenant.prefix}}{{component.name}} {{tenant.prefix}}{{componentInterface.network}} componentInterface.\r\n      validate_certs: no\r\n    register: secgroup\r\n\r\n  # ----- reset all ingress security rules for {{tenant.prefix}}{{component.name}} componentInterface {{tenant.prefix}}{{componentInterface.network}} -----\r\n  - name: Delete all ingress {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}} security group rules\r\n    os_security_group_rule:\r\n      state:            absent\r\n      security_group:   {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\r\n      protocol:         \"{{ '{{item.protocol}}' }}\"\r\n      port_range_min:   \"{{ '{{item.port_range_min}}' }}\"\r\n      port_range_max:   \"{{ '{{item.port_range_max}}' }}\"\r\n      remote_ip_prefix: \"{{ '{{item.remote_ip_prefix}}' }}\"\r\n      direction:        ingress\r\n      validate_certs:   no\r\n    ignore_errors:      yes\r\n    loop: \"{{ '{{secgroup.secgroup.security_group_rules}}' }}\"\r\n    when: item.direction == \"ingress\"\r\n\r\n  # ----- security group rules for {{tenant.prefix}}{{component.name}} componentInterface {{tenant.prefix}}{{componentInterface.network}} -----\r\n  - name: Create {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}} security group rules\r\n    os_security_group_rule:\r\n      state:            present\r\n      security_group:   {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\r\n      protocol:         \"{{ '{{item.protocol}}' }}\"\r\n      port_range_min:   \"{{ '{{item.port_range_min}}' }}\"\r\n      port_range_max:   \"{{ '{{item.port_range_max}}' }}\"\r\n      remote_ip_prefix: \"{{ '{{item.remote_ip_prefix}}' }}\"\r\n      direction:        ingress\r\n      validate_certs:   no\r\n    ignore_errors:      yes\r\n    loop:\r\n    - {protocol: icmp, port_range_min: 0, port_range_max: 255, remote_ip_prefix: 0.0.0.0/0}\r\n{% for service in component.services %}{% if componentInterface.network == service.network %}\r\n{% for network in networks %}{% if componentInterface.network == network.name %}\r\n    - {protocol: {{service.protocol}}, port_range_min: {{service.range | portmin }}, port_range_max: {{service.range | portmax }}, remote_ip_prefix: {{network.ipv4}} }\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n{% for service in component.services %}{% if componentInterface.network == service.network %}\r\n{% for component2 in components %}{% if component2.placement != 'ROUTER' %}\r\n{% for dependency in component2.dependencies %}{% if dependency.component == component.name %}{% if dependency.service == service.name %}\r\n{% for network2 in networks %}{% if dependency.network == network2.name %}\r\n    - {protocol: {{service.protocol}}, port_range_min: {{service.range | portmin }}, port_range_max: {{service.range | portmax }}, remote_ip_prefix: {{network2.ipv4}} }\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n\r\n{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\n",b="{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n----- {{tenant.prefix}}{{component.name}} -----\r\n#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Delete security groups for ports of server {{tenant.prefix}}{{component.name}}\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: \"{{ '{{ansible_playbook_python}}' }}\"\r\n  vars_files:\r\n    - ../../../input/environment.yml\r\n  environment: \"{{ '{{env_vars}}' }}\"\r\n  tasks:\r\n\r\n{% for componentInterface in component.componentInterfaces %}\r\n  # ----- security group for {{component.name}} componentInterface {{tenant.prefix}}{{componentInterface.network}} -----\r\n  - name: Delete {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}} security group\r\n    os_security_group:\r\n      state:          absent\r\n      name:           {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\r\n      description:    Security group for the {{tenant.prefix}}{{component.name}} {{tenant.prefix}}{{componentInterface.network}} componentInterface.\r\n      validate_certs: no\r\n\r\n{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\n",x="{% for component in components %}{% if component.placement == 'ROUTER' %}\r\n----- {{tenant.prefix}}{{component.name}} -----\r\n#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create router {{component.name}}\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: \"{{ '{{ansible_playbook_python}}' }}\"\r\n  vars_files:\r\n    - ../../../input/environment.yml\r\n  environment: \"{{ '{{env_vars}}' }}\"\r\n  tasks:\r\n\r\n  # ----- {{tenant.prefix}}{{component.name}} router -----\r\n  - name: Create router {{tenant.prefix}}{{component.name}}\r\n    os_router:\r\n      state:          present\r\n      name:           {{tenant.prefix}}{{component.name}}\r\n      validate_certs: no\r\n      componentInterface:\r\n{% for componentInterface in component.componentInterfaces %}\r\n      - subnet: {{tenant.prefix}}{{componentInterface.network}}_subnet\r\n{% endfor %}\r\n\r\n\r\n{% endif %}{% endfor %}\r\n",y="{% for component in components %}{% if component.placement == 'ROUTER' %}\r\n----- {{tenant.prefix}}{{component.name}} -----\r\n#!/usr/bin/env ansible-playbook\r\n---\r\n- name: Create router {{component.name}}\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n  vars:\r\n    ansible_python_interpreter: \"{{ '{{ansible_playbook_python}}' }}\"\r\n  vars_files:\r\n    - ../../../input/environment.yml\r\n  environment: \"{{ '{{env_vars}}' }}\"\r\n  tasks:\r\n\r\n  # ----- {{tenant.prefix}}{{component.name}} router -----\r\n  - name: Delete router {{tenant.prefix}}{{component.name}}\r\n    os_router:\r\n      state:          absent\r\n      name:           {{tenant.prefix}}{{component.name}}\r\n      validate_certs: no\r\n      componentInterface:\r\n{% for componentInterface in component.componentInterfaces %}\r\n      - subnet: {{tenant.prefix}}{{componentInterface.network}}_subnet\r\n{% endfor %}\r\n\r\n\r\n{% endif %}{% endfor %}\r\n",I="export OS_TENANT_NAME={{tenant.name}}\r\nexport OS_PROJECT_NAME={{tenant.name}}\r\nexport OS_USERNAME={{tenant.auth.username}}\r\nexport OS_PASSWORD={{tenant.auth.password}}\r\nexport OS_AUTH_URL={{tenant.auth.url}}\r\nexport OS_CACERT=./openstack.crt\r\n",O="{{tenant.auth.cert}}\r\n",T="#!/usr/bin/env ansible-playbook\r\n---\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}{% if component.user != '' %}\r\n{% if component.max == 1 %}\r\n- name: Update ssh keys for server {{tenant.prefix}}{{component.name}}\r\n  hosts: '{{tenant.prefix}}{{component.name}}'\r\n  gather_facts: false\r\n  tasks:\r\n    - name: Update authorized keys file for server {{tenant.prefix}}{{component.name}}\r\n      authorized_key:\r\n        user: '{{ component.user }}'\r\n        key: \"{{ '{{ item }}' }}\"\r\n        state: present\r\n        exclusive: True\r\n      become: yes\r\n      with_file:\r\n        - ../../input/authorized_keys\r\n\r\n{% else %}\r\n{% for server_index in range(1,1+component.max,1) %}\r\n- name: Update ssh keys for server {{tenant.prefix}}{{component.name}}-{{server_index}}\r\n  hosts: '{{tenant.prefix}}{{component.name}}-{{server_index}}'\r\n  gather_facts: false\r\n  tasks:\r\n    - name: Update authorized keys file for server {{tenant.prefix}}{{component.name}}-{{server_index}}\r\n      authorized_key:\r\n        user: '{{ component.user }}'\r\n        key: \"{{ '{{ item }}' }}\"\r\n        state: present\r\n        exclusive: True\r\n      become: yes\r\n      with_file:\r\n        - ../../input/authorized_keys\r\n\r\n{% endfor %}\r\n{% endif %}\r\n{% endif %}{% endif %}{% endif %}{% endfor %}\r\n",C="{% set instances, volumes, vcpu, ram, disk = 0 %}\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n{% set instances = instances + 1 %}\r\n{% for flavor in flavors %}{% if component.flavor == flavor.name %}\r\n{% set vcpu = vcpu + flavor.vcpu %}\r\n{% set ram  = ram  + flavor.ram * 1024 %}\r\n{% set disk = disk + flavor.disk %}\r\n{% endif %}{% endfor %}\r\n{% for volume in component.volumes %}\r\n{% set volumes = volumes + 1 %}\r\n{% set disk    = disk  + volume.size * 1024 %}\r\n{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\nPrequisites:\r\n============\r\n\r\nTenant: {{tenant.name}}\r\n\r\nName of ssh-key: fiveg_key\r\n\r\nQuota:\r\n------\r\n\r\n* Virtual machines:     {{instances}}\r\n* Volumes:              {{volumes}}\r\n* Virtual CPUs:         {{vcpu}}\r\n* Random Access Memory: {{ram}} [MB]\r\n* Disk Storage:         {{disk}} [MB]\r\n\r\nFlavors:\r\n--------\r\n{% for flavor in flavors %}\r\n{% set found = false %}\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n{% if found == false %}{% if component.flavor == flavor.name %}\r\n* {{(flavor.name + \"                    \") | truncate(20, true, \"\") }}: {{flavor.vcpu}} vCPUs / {{flavor.ram}} [MB ram] / {{flavor.disk}} [GB disk]\r\n{% set found = true %}\r\n{% endif %}{% endif %}\r\n{% endif %}{% endif %}{% endfor %}\r\n{% endfor %}\r\n\r\nImages:\r\n-------\r\n{% for image, components in components | groupby(\"image\") %}\r\n* {{(image + \"                               \") | truncate(32, true, \"\") }}: {% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %} {{ component.name }}{% endif %}{% endif %}{% endfor %}\\n\r\n{% endfor %}\r\n",E="README\r\n======\r\n\r\nVNF:     {{vnf}}\r\nVersion: {{version}}\r\nTenant:  {{tenant.name}}\r\nPrefix:  {{tenant.prefix}}\r\n\r\nPrequisites\r\n-----------\r\n- access to OpenStack API\r\n- ansible installed\r\n- openstack client installed\r\n- input directory (next to the directory containing this readme):\r\n  - id_rsa (private key for accessing the virtual machines)\r\n  - openstack.crt (certificate file of OpenStack API)\r\n  - authorized_keys (file with all public keys to be uploaded to VMs)\r\n\r\nPreparation\r\n-----------\r\n- source ./setup.sh\r\n\r\nUsage\r\n-----\r\n\r\ncreate and delete the whole infrastructure\r\ndetermine status of the whole infrastructure\r\ndistribute keys to all servers and\r\nconnct to a specific server\r\n- infrastructure_create.sh\r\n- infrastructure_delete.sh\r\n- infrastructure_status.sh\r\n- infrastructure_authorize.sh\r\n- infrastructure_connect.sh <server>\r\n\r\ncreate, delete and determine status of networks:\r\n- ./elements/networks/create.yml\r\n- ./elements/networks/delete.yml\r\n- ./elements/networks/status.yml\r\n\r\ncreate, delete security policies:\r\n- ./elements/servers/<server>/define_security.yml\r\n- ./elements/servers/<server>/undefine_security.yml\r\n\r\ncreate, delete and determine status of servers:\r\n- ./elements/servers/<server>/create.yml\r\n- ./elements/servers/<server>/delete.yml\r\n- ./elements/servers/status.yml\r\n\r\ndistribute ssh keys to servers:\r\n- ./elements/servers/<server>/ssh.yml\r\n",S="Host jumphost\r\n  User         ubuntu\r\n  HostName     {{tenant.jumphost}}\r\n\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}{% if component.user != '' %}\r\n{{ \"{%\" }} for port in ports.ansible_facts.openstack_ports {{ \"%}{%\" }} if port.name == '{{tenant.prefix}}{{component.name}}_{{tenant.prefix}}oam' {{ \"%}\" }}\r\nHost {{component.name}}\r\n  User         {{component.user}}\r\n  ProxyCommand ssh -i ./input/id_rsa ubuntu@{{tenant.jumphost}} -W %h:%p\r\n  HostName     {{ \"{{\" }} port.fixed_ips | map(attribute='ip_address') | join(', ') {{ \"}}\" }}\r\n\r\n{{ \"{% endif %}{% endfor %}\" }}\r\n{% endif %}{% endif %}{% endif %}{% endfor %}\r\n\r\nHost *\r\n  StrictHostKeyChecking no\r\n  UserKnownHostsFile=/dev/null\r\n  IdentityFile ./input/id_rsa\r\n",R='heat_template_version: 2015-04-30\r\nresources:\r\n{% for network in networks %}{% if network.external != "true" %}\r\n  {{tenant.prefix}}{{network.name}}:\r\n    type: OS::Neutron::Net\r\n    properties:\r\n      name:                  "{{tenant.prefix}}{{network.name}}"\r\n      admin_state_up:        true\r\n      port_security_enabled: true\r\n      shared:                false\r\n\r\n{% if network.ipv4 != "" %}\r\n  {{tenant.prefix}}{{network.name}}_v4:\r\n    type: OS::Neutron::Subnet\r\n    properties:\r\n      name:              "{{tenant.prefix}}{{network.name}}_v4"\r\n      network:           { get_attr: [{{tenant.prefix}}{{network.name}}, name] }\r\n      cidr:              {{network.ipv4}}\r\n      ip_version:        4\r\n      allocation_pools: [{ "start": {{network.ipv4start}}, "end": {{network.ipv4end}} }]\r\n      gateway_ip:       {{network.ipv4gw}}\r\n      enable_dhcp:      true\r\n{% endif %}\r\n\r\n{% if network.ipv6 != "" %}\r\n  {{tenant.prefix}}{{network.name}}_v6:\r\n    type: OS::Neutron::Subnet\r\n    properties:\r\n      name:              "{{tenant.prefix}}{{network.name}}_v6"\r\n      network:           { get_attr: [{{tenant.prefix}}{{network.name}}, name] }\r\n      cidr:              {{network.ipv6}}\r\n      ip_version:        6\r\n      allocation_pools: [{ "start": {{network.ipv6start}}, "end": {{network.ipv6end}} }]\r\n      gateway_ip:       {{network.ipv6gw}}\r\n      enable_dhcp:      true\r\n{% endif %}{% endif %}{% endfor %}\r\n\r\n{% for component in components %}{% if component.placement == \'ROUTER\' %}\r\n  {{tenant.prefix}}{{component.name}}:\r\n     type: OS::Neutron::Router\r\n     properties:\r\n       name:           "{{tenant.prefix}}{{component.name}}"\r\n       admin_state_up: true\r\n\r\n{% for componentInterface in component.componentInterfaces %}{% for network in networks %}{% if network.name == componentInterface.network %}\r\n{% if network.ipv4 != "" %}\r\n  {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}:\r\n    type: OS::Neutron::RoutercomponentInterface\r\n    properties:\r\n      router: { get_attr: [{{tenant.prefix}}{{component.name}}, name] }\r\n      subnet: { get_attr: [{{tenant.prefix}}{{network.name}}_v4, name] }\r\n\r\n{% endif %}\r\n{% if network.ipv6 != "" %}\r\n  {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}:\r\n    type: OS::Neutron::RoutercomponentInterface\r\n    properties:\r\n      router: { get_attr: [{{tenant.prefix}}{{component.name}}, name] }\r\n      subnet: { get_attr: [{{tenant.prefix}}{{network.name}}_v6, name] }\r\n\r\n{% endif %}\r\n{% endif %}{% endfor %}{% endfor %}\r\n\r\n{% endif %}{% endfor %}\r\n',N="heat_template_version: 2015-04-30\r\nresources:\r\n{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}\r\n{% for componentInterface in component.componentInterfaces %}\r\n  {{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}:\r\n    type: OS::Neutron::SecurityGroup\r\n    properties:\r\n      name:        \"{{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\"\r\n      rules:\r\n        - {protocol: icmp, port_range_min: 0, port_range_max: 255,   remote_ip_prefix: 0.0.0.0/0}\r\n        - {protocol: tcp,  port_range_min: 0, port_range_max: 65535, remote_ip_prefix: 0.0.0.0/0}\r\n        - {protocol: udp,  port_range_min: 0, port_range_max: 65535, remote_ip_prefix: 0.0.0.0/0}\r\n{% for service in component.services %}{% if componentInterface.network == service.network %}\r\n{% for network in networks %}{% if componentInterface.network == network.name %}\r\n        - {protocol: {{service.protocol}}, port_range_min: {{service.range | portmin }}, port_range_max: {{service.range | portmax }}, remote_ip_prefix: {{network.ipv4}} }\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n{% for service in component.services %}{% if componentInterface.network == service.network %}\r\n{% for component2 in components %}{% if component2.placement != 'ROUTER' %}\r\n{% for dependency in component2.dependencies %}{% if dependency.component == component.name %}{% if dependency.service == service.name %}\r\n{% for network2 in networks %}{% if dependency.network == network2.name %}\r\n        - {protocol: {{service.protocol}}, port_range_min: {{service.range | portmin }}, port_range_max: {{service.range | portmax }}, remote_ip_prefix: {{network2.ipv4}} }\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n{% endif %}{% endfor %}\r\n\r\n{% endfor %}\r\n{% endif %}{% endif %}{% endfor %}\r\n",j="{% for component in components %}{% if component.placement != 'OTHER' %}{% if component.placement != 'ROUTER' %}{% for index in range(component.max) %}{% if component.max == 1 %}{% set component_name = component.name %}{% else %}{% set component_name = component.name + \"-\" + (index+1) %}{% endif %}\r\n----- {{tenant.prefix}}{{component_name}} -----\r\nheat_template_version: 2015-04-30\r\nresources:\r\n{% for componentInterface in component.componentInterfaces %}\r\n  # ----- Port: {{tenant.prefix}}{{componentInterface.network}} for {{tenant.prefix}}{{component_name}} -----\r\n  {{tenant.prefix}}{{component_name}}_{{tenant.prefix}}{{componentInterface.network}}:\r\n     type: OS::Neutron::Port\r\n     properties:\r\n       name:                  \"{{tenant.prefix}}{{component_name}}_{{tenant.prefix}}{{componentInterface.network}}\"\r\n       network:               \"{{tenant.prefix}}{{componentInterface.network}}\"\r\n       security_groups:       [ \"{{tenant.prefix}}{{component.name}}_{{tenant.prefix}}{{componentInterface.network}}\" ]\r\n       port_security_enabled: true\r\n       admin_state_up:        true\r\n{% if componentInterface.attributes|allowed|length > 0 %}\r\n       allowed_address_pairs:\r\n{% for allowed in componentInterface.attributes|allowed %}\r\n         - ip_address: {{allowed}}\r\n{% endfor %}{% endif %}\r\n{% if componentInterface.attributes|fixed|length > 0 %}\r\n       fixed_ips:\r\n{% for fixed in componentInterface.attributes|fixed %}\r\n         - ip_address: {{fixed}}\r\n{% endfor %}{% endif %}\r\n\r\n{% endfor %}\r\n\r\n{% for volume in component.volumes %}\r\n  # ----- Volume: {{volume.name}} volume for {{tenant.prefix}}{{component_name}} -----\r\n  {tenant.prefix}}{{component_name}}_{{volume.name}}:\r\n    type: OS::Cinder::Volume\r\n    properties:\r\n      name:           \"{{tenant.prefix}}{{component_name}}_{{volume.name}}\"\r\n      size:           {{volume.size}}\r\n{% endfor %}\r\n\r\n  # ----- Server: {{tenant.prefix}}{{component_name}} -----\r\n  {{component_name}}:\r\n    type: OS::Nova::Server\r\n    properties:\r\n      name:         \"{{component_name}}\"\r\n      flavor:       \"{{component.flavor}}\"\r\n      image:        \"{{component.image}}\"\r\n      key_name:     \"admin\"\r\n      config_drive: true\r\n{% if component.userdata != \"\" %}\r\n      userdata: |\r\n        {{ component.userdata | indent(8) | safe }}\r\n{% endif %}\r\n      networks:\r\n{% for componentInterface in component.componentInterfaces %}\r\n        - port: { get_resource: {{tenant.prefix}}{{component_name}}_{{tenant.prefix}}{{componentInterface.network}} }\r\n{% endfor %}\r\n{% if component.volumes|length > 0 %}\r\n      block_device_mapping\r\n{% set devices = [ '', '/dev/vda', '/dev/vdb', '/dev/vdc', '/dev/vdd', '/dev/vde', '/dev/vdf', '/dev/vdg', '/dev/vdh', '/dev/vdi', '/dev/vdj' ] %}\r\n{% for volume in component.volumes %}\r\n        - device_name: {{ devices[loop.index] }}\r\n          volume_id:   { get_resource: {{tenant.prefix}}{{component_name}}_{{volume.name}} }\r\n{% endfor %}\r\n{% endif %}\r\n\r\n{% endfor %}{% endif %}{% endif %}{% endfor %}\r\n",A={};A["Canonical"]=f,A["Communication Matrix"]=d,A["Environment"]=l,A["Networks (create)"]=u,A["Networks (delete)"]=v,A["Networks (status)"]=h,A["Servers (create)"]=_,A["Servers (delete)"]=k,A["Servers (status)"]=g,A["Servers (define security)"]=w,A["Servers (undefine security)"]=b,A["Servers (ssh)"]=b,A["Router (create)"]=x,A["Router (delete)"]=y,A["openrc"]=I,A["openstack.crt"]=O,A["ssh"]=T,A["Prequisites"]=C,A["readme"]=E,A["config"]=S,A["HEAT Networks"]=R,A["HEAT Security"]=N,A["HEAT Servers"]=j;var P={data(){return{model:p["u"],current:p["j"],target:p["w"],view:m["c"],templates:A}},components:{AppTopbar:i["default"],AppContent:a["default"],AppSidebarContent:s["default"],modal:c["default"]}},M=P,U=(t("6f51"),t("2877")),D=Object(U["a"])(M,r,o,!1,null,null,null);n["default"]=D.exports},"85ec":function(e,n,t){},"8c91":function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:e.view.mode,attrs:{id:"appheader"}},[e._m(0),t("div",{staticClass:"label",attrs:{id:"apptitle"}},[e._v(e._s(e.title))]),t("div",{staticClass:"buttons",attrs:{id:"appbuttons"}},[t("div",{attrs:{title:"Switch Mode"}},[t("i",{staticClass:"fas fa-exchange-alt"}),e._v(" "),t("label",{attrs:{for:"modeview"}},[e._v("Mode:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedModeview,expression:"selectedModeview"}],staticStyle:{color:"darkgrey"},attrs:{id:"modeview"},on:{change:function(n){var t=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var n="_value"in e?e._value:e.value;return n}));e.selectedModeview=n.target.multiple?t:t[0]}}},e._l(e.modeviews,(function(n,r){return t("option",{key:r,domProps:{value:r}},[e._v(e._s(n))])})),0)]),t("div",{attrs:{title:"Tenant overview"},on:{click:function(n){return e.context("Tenant")}}},[t("i",{staticClass:"fas fa-map"}),e._v(" Overview ")]),"openstack"===e.selectedModeview?t("div",{attrs:{title:"Monitoring overview"},on:{click:function(n){return e.context("Monitoring")}}},[t("i",{staticClass:"fas fa-heartbeat"}),e._v(" Monitoring ")]):e._e(),t("div",{attrs:{title:"Reset model"},on:{click:e.reset}},[t("i",{staticClass:"fas fa-certificate"}),e._v(" Reset ")]),t("div",{attrs:{title:"Validate model"},on:{click:e.validate}},[t("i",{staticClass:"fas fa-check-circle"}),e._v(" Validate ")]),t("div",{attrs:{title:"Import model"},on:{click:function(n){return e.context("Import")}}},[t("i",{staticClass:"fas fa-arrow-alt-circle-down"}),e._v(" Import ")]),t("div",{attrs:{title:"Export model"},on:{click:function(n){return e.context("Export")}}},[t("i",{staticClass:"fas fa-arrow-alt-circle-up"}),e._v(" Export ")]),t("div",{attrs:{title:"Compare current and target state"},on:{click:function(n){return e.context("Delta")}}},[t("i",{staticClass:"fas fa-arrow-circle-right "}),e._v(" Compare ")]),e.locationHostname?t("div",{attrs:{title:"Documentation"},on:{click:function(n){return e.context("Docs")}}},[t("i",{staticClass:"fas fa-book"}),e._v(" Docs ")]):e._e(),"openstack"===e.selectedModeview?t("div",{staticClass:"state",attrs:{title:"Toggle between current and target state"},on:{click:e.toggleState}},[e._v(" "),t("i",{staticClass:"fas fa-adjust"}),e._v(" State: "+e._s(e.view.mode)+" ")]):e._e()]),t("div",{staticClass:"tabs",attrs:{id:"apptabs"}},["Tenant"===e.view.navigation?[t("div",{staticClass:"active"},[e._v("General")]),t("div",{on:{click:function(n){return e.context("Flavor")}}},[e._v("Flavors")]),t("div",{on:{click:function(n){return e.context("Image")}}},[e._v("Images")]),t("div",{on:{click:function(n){return e.context("Network")}}},[e._v("Networks")]),t("div",{on:{click:function(n){return e.context("Component")}}},[e._v("Components")])]:e._e(),"Image"===e.view.navigation?[t("div",{on:{click:function(n){return e.context("Tenant")}}},[e._v("General")]),t("div",{on:{click:function(n){return e.context("Flavor")}}},[e._v("Flavors")]),t("div",{staticClass:"active"},[e._v("Images")]),t("div",{on:{click:function(n){return e.context("Network")}}},[e._v("Networks")]),t("div",{on:{click:function(n){return e.context("Component")}}},[e._v("Components")])]:e._e(),"Flavor"===e.view.navigation?[t("div",{on:{click:function(n){return e.context("Tenant")}}},[e._v("General")]),t("div",{staticClass:"active"},[e._v("Flavors")]),t("div",{on:{click:function(n){return e.context("Image")}}},[e._v("Images")]),t("div",{on:{click:function(n){return e.context("Network")}}},[e._v("Networks")]),t("div",{on:{click:function(n){return e.context("Component")}}},[e._v("Components")])]:e._e(),"Network"===e.view.navigation?[t("div",{on:{click:function(n){return e.context("Tenant")}}},[e._v("General")]),t("div",{on:{click:function(n){return e.context("Flavor")}}},[e._v("Flavors")]),t("div",{on:{click:function(n){return e.context("Image")}}},[e._v("Images")]),t("div",{staticClass:"active"},[e._v("Networks")]),t("div",{on:{click:function(n){return e.context("Component")}}},[e._v("Components")])]:e._e(),"Component"===e.view.navigation?[t("div",{on:{click:function(n){return e.context("Tenant")}}},[e._v("General")]),t("div",{on:{click:function(n){return e.context("Flavor")}}},[e._v("Flavors")]),t("div",{on:{click:function(n){return e.context("Image")}}},[e._v("Images")]),t("div",{on:{click:function(n){return e.context("Network")}}},[e._v("Networks")]),t("div",{staticClass:"active"},[e._v("Components")])]:e._e(),"Tenant"!=e.view.navigation&&"Delta"!=e.view.navigation&&"Monitoring"!=e.view.navigation?t("div",{staticClass:"button",on:{click:e.add}},[t("i",{staticClass:"fas fa-plus"})]):e._e()],2)])},o=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"logo"},[t("i",{staticClass:"fas fa-cloud"}),e._v(" VNF Designer")])}],i=t("9acf"),a=t("a79f"),s=t("8cd9"),c=t("783b"),p=t.n(c),m={title:"VNF Desciptor",description:"A simple VNF descriptor",type:"object",required:["schema","vnf","version","tenant","flavors","images","networks","components"],properties:{schema:{type:"string",enum:["1.0.1"],description:"The version of the schema"},vnf:{type:"string",minLength:1,description:"The unique identifier for a virtual network function"},version:{type:"string",pattern:"^\\d+\\.\\d+.\\d+$",description:"Semantic version of the VNF descriptor"},tenant:{description:"The tenant information",type:"object",required:["name","auth"],properties:{name:{type:"string",description:"name of the tenant"},prefix:{type:"string",description:"prefix for tenant resources"},auth:{description:"The authentication information",type:"object",required:["username","password","proxy","url","cert","region","vol_api","plugin"],properties:{username:{type:"string",description:"username for accessing the API"},password:{type:"string",description:"password for accessing the API"},proxy:{type:"string",description:"url for API proxy"},url:{type:"string",description:"url for the API"},cert:{type:"string",description:"location of certificate file"},region:{type:"string",description:"region of tenant"},vol_api:{type:"string",description:"version of volume API"},plugin:{type:"string",description:"authentication plugin"}}},service:{description:"The parameters of the service network",type:"object",required:["network","cidr","gateway","proxy","port"],properties:{network:{type:"string",description:"name of the service network"},cidr:{type:"string",description:"cidr of the service network"},gateway:{anyOf:[{type:"string",description:"gateway ip address",format:"ipv4"},{const:""}]},proxy:{anyOf:[{type:"string",description:"proxy ip address",format:"ipv4"},{const:""}]},port:{type:"string",description:"proxy port number"}}},jumphost:{anyOf:[{type:"string",description:"jumphost ip address",format:"ipv4"},{const:""}]},proxy:{description:"The parameters of the http proxy",type:"object",properties:{http:{type:"string",description:"url for http proxy"},https:{type:"string",description:"url for https proxy"}}}}},flavors:{description:"The sizing of virtual servers",type:"array",items:{title:"Flavor",type:"object",required:["uuid","name","vcpu","ram","disk","public","special"],properties:{uuid:{type:"string",description:"Unique identifier of the flavor"},name:{type:"string",description:"Name of the flavor"},vcpu:{type:"number",description:"Number of virtual core processing units as string"},ram:{type:"number",description:"Size of memory in megabytes as string"},disk:{type:"number",description:"Size of local disk in gigabytes as string"},public:{type:"string",enum:["true","false"],description:"Image is a predefined public image"},special:{description:"Additional special attributes",type:"array",items:{type:"object",description:"Key-value pair",required:["key","value"],properties:{key:{type:"string",description:"Attribute name"},value:{type:"string",description:"Attribute value"}}}}}}},images:{description:"The operating systems for virtual servers",type:"array",items:{title:"Image",type:"object",required:["uuid","name","disk","container"],properties:{uuid:{type:"string",description:"Unique identifier of the image"},name:{type:"string",description:"Name of the image"},version:{type:"string",description:"Version of the image"},format:{type:"string",enum:["aki","ami","ari","iso","qcow2","raw","vdi","vhd","vhdx","vmdk"],description:"Disk format of the image"},container:{type:"string",enum:["aki","ami","ari","bare","docker","ova","ovf"],description:"Container format of the image"},disk:{type:"string",description:"Minimum disk requirements"},size:{type:"string",description:"Size of the image"},checksum:{type:"string",description:"Checksum of the image"},url:{type:"string",description:"URL for the image"},special:{type:"string",description:"Additional special attributes"}}}},networks:{description:"The virtual networks",type:"array",items:{title:"Network",type:"object",required:["uuid","ipv4","ipv4gw","ipv4start","ipv4end","ipv6","ipv6gw","ipv6start","ipv6end","route","import","export","special"],properties:{uuid:{type:"string",description:"Unique identifier of the virtual network"},name:{type:"string",description:"Name of the virtual network"},ipv4:{type:"string",description:"IPv4 CIDR of the virtual network"},ipv4gw:{type:"string",description:"IPv4 gateway of the virtual network"},ipv4start:{type:"string",description:"IPv4 start address of the virtual network"},ipv4end:{type:"string",description:"IPv4 end address of the virtual network"},ipv6:{type:"string",description:"IPv6 attributes of the virtual network"},ipv6gw:{type:"string",description:"IPv6 gateway of the virtual network"},ipv6start:{type:"string",description:"IPv6 start address of the virtual network"},ipv6end:{type:"string",description:"IPv6 end address of the virtual network"},route:{type:"string",description:"Comma seperated list of route targets"},export:{type:"string",description:"Comma seperated list of export targets"},import:{type:"string",description:"Comma seperated list of import targets"},special:{type:"string",description:"Additional special attributes"}}}},components:{description:"The virtual servers",type:"array",items:{title:"Component",type:"object",required:["uuid","name","placement","flavor","image","min","size","max","componentInterfaces","volumes","services","dependencies","userdata"],properties:{uuid:{type:"string",description:"Unique identifier of the virtual server"},name:{type:"string",description:"Name of the virtual server"},user:{type:"string",description:"Name of the user account"},placement:{type:"string",enum:["OTHER","EXT","INT","MGMT","ROUTER"],description:"Placement of the virtual server or type of component"},flavor:{type:"string",description:"Name of the virtual server sizing"},image:{type:"string",description:"Name of the operating system"},min:{type:"number",description:"Minimum size of the cluster"},size:{type:"number",description:"Default size of the cluster"},max:{type:"number",description:"Maximum size of the cluster"},userdata:{type:"string",description:"Initialisation script"},componentInterfaces:{description:"The componentInterfaces to virtual networks",type:"array",items:{title:"Component componentInterface",type:"object",required:["network","attributes"],properties:{network:{type:"string",description:"Name of the virtual network"},attributes:{type:"string",description:"Additional special attributes"}}}},volumes:{description:"The attached virtual block storage",type:"array",items:{title:"Component Volume",type:"object",required:["name","size","type","attributes"],properties:{name:{type:"string",description:"Name of the virtual network"},size:{type:"number",description:"Size of the block storage in gigabyte"},type:{type:"string",enum:["EXT","INT"],description:"Name of block storage pool"},attributes:{type:"string",description:"Additional special attributes"}}}},services:{description:"The exposed services",type:"array",items:{title:"Component Service",type:"object",required:["name","network","protocol","range"],properties:{name:{type:"string",description:"Name of the service"},network:{type:"string",description:"The virtual network via which the service is exposed"},protocol:{type:"string",enum:["tcp","udp","icmp","sctp","any","none"],description:"The service protocol"},range:{type:"string",minimum:1,description:"Port range"}}}},dependencies:{description:"The dependencies to services provided by other componennts",type:"array",items:{title:"Component Network",type:"object",required:["component","service","network"],properties:{component:{type:"string",description:"Name of the other component"},service:{type:"string",description:"The name of the service provided by the other component"},network:{type:"string",description:"The virtual network via which the service is consumed"}}}}}}}}};function f(e){var n=new p.a,t=n.compile(m),r=t(e);return r?"":(Object(i["b"])(t.errors[0].dataPath),"Schema error:\nfield "+t.errors[0].message+"\nLocation: "+t.errors[0].dataPath)}function d(e){var n=e.flavors.map(e=>e.name),t=e.images.map(e=>e.name),r=e.networks.map(e=>e.name),o=e.components.map(e=>e.name),a=[];for(var s of e.components)for(var c of s.services)a.push(s.name+":"+c.name);for(var p=0;p<e.components.length;p++){if(s=e.components[p],!n.includes(s.flavor))return Object(i["b"])(".components["+p+"].flavor"),"Reference error:\ninvalid flavor .components["+p+"].flavor";if(!t.includes(s.image))return Object(i["b"])(".components["+p+"].image"),"Reference error:\ninvalid image .components["+p+"].image";for(var m=[],f=0;f<s.componentInterfaces.length;f++){var d=s.componentInterfaces[f];if(m.push(d.network),!r.includes(d.network))return Object(i["b"])(".components["+p+"].componentInterfaces["+f+"].network"),"Reference error\ninvalid network .components["+p+"].componentInterfaces["+f+"].network"}for(f=0;f<s.services.length;f++)if(c=s.services[f],!m.includes(c.network))return Object(i["b"])(".components["+p+"].services["+f+"].network"),"Reference error\ninvalid network .components["+p+"].services["+f+"].network";for(f=0;f<s.dependencies.length;f++){let e=s.dependencies[f];if(!o.includes(e.component))return Object(i["b"])(".components["+p+"].dependencies["+f+"].component"),"Reference error\ninvalid component .components["+p+"].dependencies["+f+"].component";if(!m.includes(e.network))return Object(i["b"])(".components["+p+"].dependencies["+f+"].network"),"Reference error\ninvalid network .components["+p+"].dependencies["+f+"].component";var l=e.component+":"+e.service;if(!a.includes(l))return Object(i["b"])(".components["+p+"].dependencies["+f+"].service"),"Reference error\ninvalid service .components["+p+"].dependencies["+f+"].service"}}return""}var l=t("2f62"),u=t("5935"),v={props:["model","view"],data(){return{locationHostname:window.location.hostname}},computed:{...Object(l["b"])(["modeviews"]),...Object(u["b"])(["selectedModeview"]),title:function(){switch(this.view.detail){case"Monitoring":return"Monitoring: "+this.model.vnf+" ("+this.model.version+")";case"Delta":return"Comparison: "+a["j"].vnf+" ("+a["j"].version+") versus "+a["w"].vnf+" ("+a["w"].version+")"}return("current"===this.view.mode?"Current state: ":"Target state: ")+this.model.vnf+" ("+this.model.version+")"}},methods:{context:function(e){Object(i["a"])(e);var n=document.getElementById("appdetail");n.style.left=null;var t=document.getElementById("apptabs");switch(t.style.display=null,this.view.detail="Tenant",e){case"Monitoring":this.view.detail="Monitoring",n.style.left="0px",t.style.display="none",this.$emit("monitor");break;case"Import":this.view.detail="Import";break;case"Export":this.view.detail="Export";break;case"Delta":this.view.detail="Delta",n.style.left="0px",t.style.display="none";break;case"Docs":var r=window.open(window.location.href+"docs","_blank");r.focus();break;default:}},toggleState:function(){if("current"===this.view.mode){JSON.parse(JSON.stringify(this.model));this.view.mode="target",Object(a["v"])(a["w"])}else if("target"===this.view.mode){JSON.parse(JSON.stringify(this.model));this.view.mode="current",Object(a["v"])(a["j"])}var e=document.getElementById("appdetail");e.style.left=null;var n=document.getElementById("apptabs");n.style.display=null,Object(i["a"])("Tenant")},add:function(){"Flavor"===this.view.navigation&&Object(a["f"])(),"Image"===this.view.navigation&&Object(a["h"])(),"Network"===this.view.navigation&&Object(a["i"])(),"Component"===this.view.navigation&&Object(a["a"])()},del:function(){"Flavor"===this.view.navigation&&deleteFlavor(),"Image"===this.view.navigation&&deleteImage(),"Network"===this.view.navigation&&deleteNetwork(),"Component"===this.view.navigation&&deleteComponent()},validate:function(){var e=JSON.parse(JSON.stringify(this.model)),n=f(e);""==n?(n=d(e),this.view.modal=""==n?"No Validation Errors":n):this.view.modal=n},reset:function(){if("current"===this.view.mode){let e=JSON.parse(JSON.stringify(Object(s["b"])()));this.view.mode="current",Object(a["v"])(e),Object(i["a"])("Tenant")}else if("target"===this.view.mode){let e=JSON.parse(JSON.stringify(Object(s["b"])()));this.view.mode="target",Object(a["v"])(e),Object(i["a"])("Tenant"),this.$forceUpdate()}}}},h=v,_=(t("4968"),t("2877")),k=Object(_["a"])(h,r,o,!1,null,"fff1f042",null);n["default"]=k.exports},"8cd9":function(e,n,t){"use strict";function r(e){var n=/fixed:[^;]*/i,t=[],r=e.match(n);if(!r)return t;var o=r[0],i=o.substr(7),a=i.split(",");for(var c of a)if(c.indexOf("-")<0)t.push(c);else for(var p of s(c))t.push(p);return t}function o(e){var n=/allowed:[^;]*/i,t=[],r=e.match(n);if(!r)return t;var o=r[0],i=o.substr(9),a=i.split(",");for(var c of a)if(c.indexOf("-")<0)t.push(c);else for(var p of s(c))t.push(p);return t}function i(e){var n=e.split("-");return 2==n.length?n[0]:e}function a(e){var n=e.split("-");return 2==n.length?n[1]:e}function s(e){for(var n=[],t=e.lastIndexOf("."),r=e.substr(0,t),o=e.substr(t+1),i=o.split("-"),a=parseInt(i[0],10),s=parseInt(i[1],10),c=a;c<=s;c++)n.push(r+"."+c);return n}function c(){return{vnf:"",version:"",tenant:{name:"",auth:{username:"",password:"",proxy:"",url:"",cert:"",region:"",vol_api:"",plugin:""},service:{network:"",cidr:"",gateway:""},proxy:{address:"",port:""},jumphost:""},flavors:[],images:[],networks:[],components:[]}}t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o})),t.d(n,"e",(function(){return i})),t.d(n,"d",(function(){return a})),t.d(n,"b",(function(){return c}))},9455:function(e,n,t){"use strict";var r=t("f0ce"),o=t.n(r);o.a},"999d":function(e,n,t){"use strict";var r=t("0c89"),o=t.n(r);o.a},"9acf":function(e,n,t){"use strict";t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return a}));var r=t("a79f"),o={navigation:"Tenant",detail:"Tenant",entity:null,field:null,export:"Canonical",modal:"",now:"",mode:"current"};function i(e){if("Docs"!==e){if("Import"===e)return o.navigation="Tenant",void(o.detail="Import");if("Export"===e)return o.navigation="Tenant",void(o.detail="Export");if("Delta"===e)return o.navigation="Delta",void(o.detail="Delta");if("Tenant"===e)return o.navigation="Tenant",void(o.detail="Tenant");o.navigation=e,o.detail!==o.navigation&&(o.detail="Tenant")}}function a(e){var n={flavors:"Flavor",images:"Image",networks:"Network",components:"Component"},t=e.split(".");t.length;if(console.log(e),2===t.length)return o.navigation="Tenant",o.detail="Tenant",void(o.field=t[1]);if("tenant"===t[1])return o.navigation="Tenant",o.detail="Tenant",void(3===t.length?o.field=t[1]+"_"+t[2]:o.field=t[1]+"_"+t[2]+"_"+t[3]);if(3===t.length){var i=t[1].indexOf("["),a=t[1].substr(0,i),s=Number(t[1].substr(i+1).replace("]","")),c=t[2];return o.navigation=n[a],o.detail=n[a],o.entity=r["u"][a][s],void(o.field=c)}if(4===t.length){i=t[1].indexOf("["),a=t[1].substr(0,i),s=Number(t[1].substr(i+1).replace("]",""));var p=t[2].indexOf("["),m=t[2].substr(0,p),f=Number(t[2].substr(p+1).replace("]",""));c=m+"_"+String(f)+"_"+t[3];return o.navigation=n[a],o.detail=n[a],o.entity=r["u"][a][s],void(o.field=c)}console.log(t)}},"9e71":function(e,n,t){},a79f:function(e,n,t){"use strict";t.d(n,"j",(function(){return a})),t.d(n,"w",(function(){return s})),t.d(n,"u",(function(){return c})),t.d(n,"v",(function(){return p})),t.d(n,"f",(function(){return f})),t.d(n,"q",(function(){return d})),t.d(n,"g",(function(){return l})),t.d(n,"o",(function(){return u})),t.d(n,"h",(function(){return v})),t.d(n,"r",(function(){return h})),t.d(n,"i",(function(){return _})),t.d(n,"s",(function(){return k})),t.d(n,"a",(function(){return g})),t.d(n,"p",(function(){return w})),t.d(n,"e",(function(){return b})),t.d(n,"n",(function(){return x})),t.d(n,"c",(function(){return y})),t.d(n,"l",(function(){return I})),t.d(n,"t",(function(){return O})),t.d(n,"d",(function(){return T})),t.d(n,"m",(function(){return C})),t.d(n,"b",(function(){return E})),t.d(n,"k",(function(){return S}));var r=t("651e"),o=t.n(r),i='\n---\nschema:     1.0.1\nvnf:        demo\nversion:    1.0.0\ntenant:\n  name:          "demo"\n  prefix:        ""\n  auth:\n    username:    "demo"\n    password:    "S3CR3T"\n    proxy:       ""\n    url:         ""\n    cert:        ""\n    region:      ""\n    vol_api:     ""\n    plugin:      ""\n  service:\n    network:     ""\n    cidr:        ""\n    gateway:     ""\n    proxy:       ""\n    port:        ""\n  jumphost:      ""\n  proxy:\n    http:        ""\n    https:       ""\nflavors:\n  - uuid:    "08e88f71-8916-428e-ae2e-e37b50619405"\n    name:    "none"\n    vcpu:    0\n    ram:     0\n    disk:    0\n    public:  "false"\n    special: []\n  - uuid:    "b18f5596-e88b-4e0c-a2b3-da97fae62e85"\n    name:    "standard"\n    vcpu:    2\n    ram:     8\n    disk:    10\n    public:  "false"\n    special: []\nimages:\n- { uuid: "55b1f2fc-caab-4bea-8f4b-5b7c46d7abb6", name: "none", version: "", format: "qcow2", container: "bare", disk: "0", size: "0", checksum: "", url: "", special: "" }\n- { uuid: "3543f742-81b7-4dd3-86d9-ea52b134dbb1", name: "CentOS 7", version: "7.5", format: "qcow2", container: "bare", disk: "0", size: "0", checksum: "b376afdc0150601f15e53516327d9832216e01a300fecfc302066e36e2ac2b39", url: "https://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud-1905.qcow2", special: "" }\nnetworks:\n  - uuid:      "726dc281-2eb5-469e-857d-4af9336ff02a"\n    name:      "pub"\n    external:  "true"\n    ipv4:      "0.0.0.0/0"\n    ipv4gw:    ""\n    ipv4start: ""\n    ipv4end:   ""\n    ipv6:      ""\n    ipv6gw:    ""\n    ipv6start: ""\n    ipv6end:   ""\n    route:     ""\n    export:    ""\n    import:    ""\n    special:   ""\n  - uuid:      "221d325b-35a5-4eca-8a3f-ea5ade11f6fe"\n    name:      "ext"\n    external:  ""\n    ipv4:      "10.0.1.0/0"\n    ipv4gw:    "10.0.1.1"\n    ipv4start: "10.0.1.100"\n    ipv4end:   "10.0.1.199"\n    ipv6:      ""\n    ipv6gw:    ""\n    ipv6start: ""\n    ipv6end:   ""\n    route:     ""\n    export:    ""\n    import:    ""\n    special:   ""\n  - uuid:      "540146df-32f7-4aae-b65b-a4523c9c328d"\n    name:      "int"\n    external:  ""\n    ipv4:      "10.0.0.2/24"\n    ipv4gw:    "10.0.0.1"\n    ipv4start: "10.0.0.100"\n    ipv4end:   "10.0.0.199"\n    ipv6:      ""\n    ipv6gw:    ""\n    ipv6start: ""\n    ipv6end:   ""\n    route:     ""\n    export:    ""\n    import:    ""\n    special:   ""\n  - uuid:      "20cefffb-6ec5-4161-8562-612a4651e436"\n    name:      "oam"\n    external:  "false"\n    ipv4:      "10.0.0.0/24"\n    ipv4gw:    "10.0.0.1"\n    ipv4start: "10.0.0.100"\n    ipv4end:   "10.0.0.199"\n    ipv6:      ""\n    ipv6gw:    ""\n    ipv6start: ""\n    ipv6end:   ""\n    route:     ""\n    export:    ""\n    import:    ""\n    special:   ""\ncomponents:\n  - uuid:         "f76afc3d-b19d-4f67-ab56-f7261501b5c4"\n    name:         "user"\n    user:         "root"\n    placement:    "OTHER"\n    flavor:       "none"\n    image:        "none"\n    min:          1\n    size:         1\n    max:          1\n    volumes:      []\n    componentInterfaces:\n      - { network: "pub", attributes: "" }\n    services:     []\n    dependencies:\n      - { component: "firewall", service: "https", network: "pub" }\n    userdata:     ""\n\n  - uuid:         "9572cd15-0c75-43f2-ad28-7031f172132f"\n    name:         "firewall"\n    user:         "root"\n    placement:    "EXT"\n    flavor:       "standard"\n    image:        "CentOS 7"\n    min:          1\n    size:         1\n    max:          1\n    volumes:      []\n    componentInterfaces:\n      - { network: "pub", attributes: "" }\n      - { network: "oam", attributes: "" }\n      - { network: "ext", attributes: "" }\n    services:\n      - { name: "ssh", network: "pub", protocol: "tcp", range: "22" }\n      - { name: "https", network: "pub", protocol: "tcp", range: "443" }\n    dependencies:\n      - { component: "application", service: "https", network: "ext" }\n    userdata:     ""\n\n  - uuid:         "4972819c-7c64-4e26-a0a0-41d86d798773"\n    name:         "application"\n    user:         "root"\n    placement:    "EXT"\n    flavor:       "none"\n    image:        "none"\n    min:          1\n    size:         3\n    max:          3\n    volumes:      []\n    componentInterfaces:\n      - { network: "oam", attributes: "" }\n      - { network: "ext", attributes: "" }\n      - { network: "int", attributes: "" }\n    services:\n      - { name: "ssh", network: "oam", protocol: "tcp", range: "22" }\n      - { name: "https", network: "ext", protocol: "tcp", range: "443" }\n    dependencies: []\n    userdata:     ""\n\n  - uuid:         "871076e7-40d9-4a24-b35f-f14adac5a67c"\n    name:         "database"\n    user:         "root"\n    placement:    "INT"\n    flavor:       "none"\n    image:        "none"\n    min:          1\n    size:         3\n    max:          3\n    volumes:\n      - { name: "data", size: 100, type: "INT", attributes: "" }\n    componentInterfaces:\n      - { network: "oam", attributes: "" }\n      - { network: "int", attributes: "" }\n    services:\n      - { name: "ssh", network: "oam", protocol: "tcp", range: "22" }\n      - { name: "mysql", network: "int", protocol: "tcp", range: "3306" }\n      - { name: "replication", network: "int", protocol: "tcp", range: "33061" }\n    dependencies:\n      - { component: "database", service: "replication", network: "int" }\n    userdata:     ""\n\n  - uuid:         "b2b214b6-37b5-4f4d-8706-8ca590b14a38"\n    name:         "devops"\n    placement:    "OTHER"\n    flavor:       "none"\n    image:        "none"\n    min:          1\n    size:         1\n    max:          1\n    volumes:      []\n    componentInterfaces:\n      - { network: "pub", attributes: "" }\n    services:     []\n    dependencies:\n      - { component: "firewall", service: "ssh", network: "pub" }\n    userdata:     ""\n\n';let a=o.a.safeLoad(i),s=o.a.safeLoad(i),c=a;function p(e){c.schema="1.0.1",c.vnf=e.vnf,c.version=e.version,c.tenant=e.tenant,c.flavors=e.flavors,c.images=e.images,c.networks=e.networks,c.components=e.components}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)}))}function f(){var e=m(),n=c.flavors.length+1;c.flavors.push({uuid:e,name:"flavor-"+n,public:"false",special:[]})}function d(e){var n=c.flavors.indexOf(e);n>-1&&c.flavors.splice(n,1)}function l(e){var n=e.special.length+1;e.special.push({key:"attr"+n,value:""})}function u(e,n){var t=e.special.indexOf(n);t>-1&&e.special.splice(t,1)}function v(){var e=m(),n=c.images.length+1;c.images.push({uuid:e,name:"image-"+n,version:"",format:"qcow2",container:"bare",disk:"0",size:"0",special:"",url:""})}function h(e){var n=c.images.indexOf(e);n>-1&&c.images.splice(n,1)}function _(){var e=m(),n=c.networks.length+1;c.networks.push({uuid:e,name:"net-"+n,ipv4:"",ipv4gw:"",ipv4start:"",ipv4end:"",ipv6:"",ipv6gw:"",ipv6start:"",ipv6end:"",route:"",import:"",export:"",special:""})}function k(e){var n=c.networks.indexOf(e);n>-1&&c.networks.splice(n,1)}function g(){var e=m(),n=c.components.length+1;c.components.push({uuid:e,name:"comp-"+n,placement:"MGMT",flavor:"none",image:"none",min:1,max:1,size:1,volumes:[],componentInterfaces:[],services:[],dependencies:[],userdata:[]})}function w(e){var n=c.components.indexOf(e);n>-1&&c.components.splice(n,1)}function b(e){var n=e.volumes.length+1;e.volumes.push({name:"volume-"+n,size:100,type:e.placement.toUpperCase(),attributes:""})}function x(e,n){var t=e.volumes.indexOf(n);t>-1&&e.volumes.splice(t,1)}function y(e,n=""){""!==n||e.componentInterfaces.length;e.componentInterfaces.push({network:n,ipv4:"",ipv6:"",attributes:""})}function I(e,n){var t=e.componentInterfaces.indexOf(n);t>-1&&e.componentInterfaces.splice(t,1)}function O(e,n){for(var t of e.componentInterfaces)if(t.network===n)return t;return null}function T(e){var n=e.services.length+1;e.services.push({name:"svc-"+n,network:"",protocol:"tcp",range:"0-65535"})}function C(e,n){var t=e.services.indexOf(n);t>-1&&e.services.splice(t,1)}function E(e){var n=e.dependencies.length+1;e.dependencies.push({component:"dep-"+n,service:"",network:""})}function S(e,n){var t=e.dependencies.indexOf(n);t>-1&&e.dependencies.splice(t,1)}},b517:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"appnavigation"}},["Tenant"===e.view.navigation?t("tenantform",{attrs:{model:e.model,view:e.view}}):e._e(),"Flavor"===e.view.navigation?t("flavors",{attrs:{model:e.model,view:e.view}}):e._e(),"Image"===e.view.navigation?t("images",{attrs:{model:e.model,view:e.view}}):e._e(),"Network"===e.view.navigation?t("networks",{attrs:{model:e.model,view:e.view}}):e._e(),"Component"===e.view.navigation?t("components",{attrs:{model:e.model,view:e.view}}):e._e()],1)},o=[],i={props:["model","view"],components:{tenantform:()=>t.e("chunk-e25f6612").then(t.bind(null,"feb0")),flavors:()=>t.e("chunk-2d0ce7eb").then(t.bind(null,"6061")),images:()=>t.e("chunk-2d0bda08").then(t.bind(null,"2d99")),networks:()=>t.e("chunk-2d0cebfb").then(t.bind(null,"617a")),components:()=>t.e("chunk-2d21ed27").then(t.bind(null,"d6cb"))}},a=i,s=(t("b814"),t("2877")),c=Object(s["a"])(a,r,o,!1,null,null,null);n["default"]=c.exports},b814:function(e,n,t){"use strict";var r=t("e826"),o=t.n(r);o.a},bb51:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("app")},o=[],i=t("81ad"),a={name:"Home",components:{app:i["default"]}},s=a,c=t("2877"),p=Object(c["a"])(s,r,o,!1,null,null,null);n["default"]=p.exports},bc77:function(e,n,t){},c082:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"appdetail"}},["Flavor"===e.view.detail?t("flavorform",{attrs:{model:e.model,view:e.view,flavor:e.view.entity}}):e._e(),"Image"===e.view.detail?t("imageform",{attrs:{model:e.model,view:e.view,image:e.view.entity}}):e._e(),"Network"===e.view.detail?t("networkform",{attrs:{model:e.model,view:e.view,network:e.view.entity}}):e._e(),"Component"===e.view.detail?t("componentform",{attrs:{model:e.model,component:e.view.entity}}):e._e(),"Export"===e.view.detail?t("exportform",{attrs:{model:e.model,view:e.view,templates:e.templates}}):e._e(),"Import"===e.view.detail?t("importform",{attrs:{model:e.model,view:e.view}}):e._e(),"Delta"===e.view.detail?t("deltaform",{attrs:{model:e.model,current:e.current,target:e.target,view:e.view}}):e._e(),"Tenant"===e.view.detail?t("tenant",{attrs:{model:e.model,view:e.view}}):e._e(),"Monitoring"===e.view.detail?t("monitoring",{attrs:{model:e.model,view:e.view}}):e._e()],1)},o=[],i={props:["model","current","target","view","templates"],components:{tenant:()=>t.e("chunk-10bbff56").then(t.bind(null,"be86")),tenant_network:()=>t.e("chunk-360c663a").then(t.bind(null,"24e1")),tenant_network2:()=>t.e("chunk-18aa50ba").then(t.bind(null,"98b1")),tenant_component:()=>t.e("chunk-0a483282").then(t.bind(null,"ce6d")),tenant_component2:()=>t.e("chunk-0e3452c3").then(t.bind(null,"50e8")),flavorform:()=>t.e("chunk-df2448ca").then(t.bind(null,"3c6f")),imageform:()=>t.e("chunk-54cb55e5").then(t.bind(null,"7b18")),networkform:()=>t.e("chunk-03c229be").then(t.bind(null,"5f56")),componentform:()=>t.e("chunk-dac2a49c").then(t.bind(null,"bf45")),monitoring:()=>t.e("chunk-9c8ee19a").then(t.bind(null,"2207")),importform:()=>t.e("chunk-70e8bc69").then(t.bind(null,"1050")),exportform:()=>t.e("chunk-6eccab85").then(t.bind(null,"4ba9")),deltaform:()=>t.e("chunk-2dc35639").then(t.bind(null,"0018"))}},a=i,s=(t("999d"),t("2877")),c=Object(s["a"])(a,r,o,!1,null,"271a2484",null);n["default"]=c.exports},c505:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"modal"}},[t("div",{staticClass:"content"},[t("span",{staticClass:"close",on:{click:e.close}},[e._v("×")]),t("span",{domProps:{innerHTML:e._s(e.html)}})])])},o=[],i={props:["view"],computed:{html:function(){for(var e=this.view.modal.split("\n"),n="<h2>"+e[0]+"</h2>",t="",r=1;r<e.length;r++){var o=e[r],i=o.indexOf(":");if(i<0)t=t+o+"<br/>";else{var a=o.substr(0,i),s=o.substr(i+1);t=t+"<b>"+a+":</b> "+s+"<br/>"}o.split(":",1)}return n+t}},methods:{close:function(){if(this.view.modal="",this.view.field){var e=document.getElementById(this.view.field);e&&e.focus()}}}},a=i,s=(t("9455"),t("2877")),c=Object(s["a"])(a,r,o,!1,null,"d74319f0",null);n["default"]=c.exports},e826:function(e,n,t){},f0ce:function(e,n,t){}});
//# sourceMappingURL=app.75f10cfe.js.map